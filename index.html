<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kru Pai Classroom ‚Äì ‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡∏ä (‡∏£‡∏≤‡∏Å‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô vs ‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô) 10 ‡∏£‡∏≠‡∏ö</title>
<style>
  :root{
    --bg:#ffffff;--fg:#111;--primary:#2e7d32;--primary-2:#e8f5e9;--ok:#1b5e20;--bad:#c62828;--muted:#666;
  }
  html,body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,TH Sarabun New,Prompt,sans-serif;background:var(--bg);color:var(--fg);} 
  .wrap{max-width:900px;margin:0 auto;padding:20px 16px 64px;}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;background:var(--primary-2);border-bottom:3px solid var(--primary);padding:14px 16px;border-radius:16px;margin-bottom:16px}
  header h1{font-size:clamp(18px,4vw,28px);margin:0;line-height:1.2}
  header .brand{font-weight:700;color:var(--primary)}
  .card{background:#fff;border:1px solid #eee;border-radius:18px;box-shadow:0 6px 24px rgba(0,0,0,.06);padding:18px;margin:14px 0}
  .start h2{margin:0 0 8px;font-size:clamp(18px,3.6vw,24px)}
  .row{display:grid;grid-template-columns:1fr;gap:12px}
  label{font-size:14px;color:#444}
  input[type=text]{width:100%;padding:14px 16px;border-radius:14px;border:1px solid #ddd;font-size:16px}
  button{cursor:pointer;border:none;padding:12px 18px;border-radius:14px;font-weight:700}
  .btn-primary{background:var(--primary);color:#fff}
  .btn-ghost{background:#f6f6f6}
  .meta{display:flex;gap:10px;flex-wrap:wrap;font-size:14px;color:#444}
  .chip{background:#f5f5f5;border-radius:999px;padding:6px 10px}
  .hidden{display:none}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:700px){.grid{grid-template-columns:1fr 1fr 1fr 1fr 1fr}}
  .plant{border:1px solid #e5e5e5;border-radius:14px;padding:12px;text-align:center;user-select:none;transition:transform .06s}
  .plant:hover{transform:translateY(-1px)}
  .plant.sel{outline:3px solid var(--primary); background:#f1fbf1}
  .plant.ok{border-color:var(--ok); background:#f3fff4}
  .plant.no{border-color:var(--bad); background:#fff5f5}
  .statusbar{display:flex;gap:12px;align-items:center;justify-content:space-between;position:sticky;top:0;background:#fff;border:1px solid #eee;border-radius:14px;padding:10px 12px;margin:10px 0;z-index:5}
  .score{font-weight:800}
  .rule{font-size:18px;margin:6px 0 0}
  .footer{text-align:center;color:#666;margin-top:24px}
  .hint{color:var(--muted);font-size:13px}
  .badge{display:inline-block;background:var(--primary);color:#fff;padding:6px 10px;border-radius:999px;font-size:14px;font-weight:700}
  .timer{font-feature-settings:"tnum" 1, "lnum" 1; font-variant-numeric:tabular-nums}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <div class="brand">Kru Pai Classroom</div>
      <h1>‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡∏ä ‚Äì ‡∏£‡∏≤‡∏Å‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô / ‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô (10 ‡∏£‡∏≠‡∏ö)</h1>
      <div class="hint">‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≠‡∏ö (‡∏°‡∏µ 2‚Äì3 ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ô 5 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á) ‚Ä¢ ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ñ‡∏π‡∏Å +1 ‡πÅ‡∏ï‡πâ‡∏° ‚Ä¢ ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ú‡∏¥‡∏î -1 ‡πÅ‡∏ï‡πâ‡∏° ‚Ä¢ ‡πÑ‡∏°‡πà‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏• ‚Ä¢ ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ <b>10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ/‡∏£‡∏≠‡∏ö</b></div>
    </div>
    <div class="badge" id="phase">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</div>
  </header>

  <!-- Start Screen -->
  <section id="start" class="card start">
    <h2>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö üåø</h2>
    <p>‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ‡∏°‡∏µ <b>10 ‡∏£‡∏≠‡∏ö</b> ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≠‡∏ö‡∏à‡∏∞‡πÉ‡∏´‡πâ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏° <b>‡∏£‡∏≤‡∏Å‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô</b> ‡∏´‡∏£‡∏∑‡∏≠ <b>‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô</b> ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏∑‡∏ä <b>5 ‡∏ä‡∏ô‡∏¥‡∏î</b> ‡πÉ‡∏´‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ <b>10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</b></p>
    <div class="row">
      <div>
        <label>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô</label>
        <input id="player" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô Mint"/>
      </div>
    </div>
    <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
      <button class="btn-primary" id="btnStart" type="button">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</button>
    </div>
  </section>

  <!-- Game Screen -->
  <section id="game" class="hidden">
    <div class="statusbar">
      <div class="meta">
        <span>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô: <strong id="who">-</strong></span>
        <span class="chip">‡∏£‡∏≠‡∏ö <span id="round">1</span>/10</span>
        <span class="chip score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô <span id="pts">0</span> / <span id="max">0</span> (<span id="pct">0</span>%)</span>
      </div>
      <div class="meta">
        <span class="timer">‚è≥ <span id="left">20</span>s</span>
        <button id="btnBackHome" class="btn-ghost" type="button" onclick="return backHome(event)">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
      </div>
    </div>

    <div class="card">
      <div id="rule" class="rule"></div>
      <div id="board" class="grid" style="margin-top:12px"></div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
        <button id="btnCheck" class="btn-primary" type="button">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
        <button id="btnNext" class="btn-ghost hidden" type="button">‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ñ∂</button>
      </div>
    </div>
  </section>

  <!-- Result Screen -->
  <section id="result" class="hidden card">
    <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô üéâ</h2>
    <p><strong id="sumName"></strong> ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° <strong id="sumScore">0</strong> / <span id="sumMax">0</span> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (<span id="sumPct">0</span>%) ‡∏à‡∏≤‡∏Å 10 ‡∏£‡∏≠‡∏ö</p>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 6px">
      <button class="btn-primary" id="btnRestart" type="button" onclick="return backHome(event)">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
    </div>
  </section>

  <div class="footer">¬© Kru Pai Classroom ¬∑ Plant Select Game</div>
</div>

<script>
// ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏û‡∏∑‡∏ä: root = ‡∏£‡∏≤‡∏Å‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô (‡∏£‡∏≤‡∏Å‡∏™‡∏∞‡∏™‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£), stem = ‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô (‡πÄ‡∏´‡∏á‡πâ‡∏≤/‡∏´‡∏±‡∏ß/‡∏´‡∏±‡∏ß‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå/‡∏´‡∏±‡∏ß‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô)
const PLANTS = [
  // ‡∏£‡∏≤‡∏Å‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô
  {name:"‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó", type:"root"},
  {name:"‡∏°‡∏±‡∏ô‡∏™‡∏≥‡∏õ‡∏∞‡∏´‡∏•‡∏±‡∏á", type:"root"},
  {name:"‡∏°‡∏±‡∏ô‡πÄ‡∏ó‡∏®", type:"root"},
  {name:"‡∏´‡∏±‡∏ß‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î", type:"root"},
  {name:"‡∏´‡∏±‡∏ß‡πÑ‡∏ä‡πÄ‡∏ó‡πâ‡∏≤", type:"root"},
  {name:"‡∏ö‡∏µ‡∏ó‡∏£‡∏π‡∏ï", type:"root"},
  {name:"‡∏°‡∏±‡∏ô‡πÅ‡∏Å‡∏ß", type:"root"},

  // ‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏π‡∏õ‡∏≤‡∏¢‡∏Ç‡∏≠)
  {name:"‡∏Ç‡∏¥‡∏á", type:"stem"},            // rhizome
  {name:"‡∏Ç‡πà‡∏≤", type:"stem"},            // rhizome
  {name:"‡∏Ç‡∏°‡∏¥‡πâ‡∏ô", type:"stem"},          // rhizome
  {name:"‡∏Å‡∏£‡∏∞‡∏ä‡∏≤‡∏¢", type:"stem"},         // rhizome (fingerroot)
  {name:"‡πÄ‡∏´‡∏á‡πâ‡∏≤‡∏Å‡∏•‡πâ‡∏ß‡∏¢", type:"stem"},     // rhizome (banana corm/rhizome)
  {name:"‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á", type:"stem"},       // tuber
  {name:"‡πÄ‡∏ú‡∏∑‡∏≠‡∏Å", type:"stem"}           // corm
];

const RULES = [
  {key:"root", text:"‡∏à‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡∏ä‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô '‡∏£‡∏≤‡∏Å‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô' (‡∏£‡∏≤‡∏Å‡∏™‡∏∞‡∏™‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£)"},
  {key:"stem", text:"‡∏à‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏∑‡∏ä‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô '‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô' (‡πÄ‡∏´‡∏á‡πâ‡∏≤/‡∏´‡∏±‡∏ß/‡∏´‡∏±‡∏ß‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå/‡∏´‡∏±‡∏ß‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô)"}
];

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a;}

const el = id=>document.getElementById(id);
const start = el('start');
const game = el('game');
const result = el('result');
const phase = el('phase');

let state = {round:1, score:0, max:0, name:"-", target:"root", board:[], selected:new Set(), checked:false, secs:10, timer:null};

function newRound(){
  // ‡∏™‡∏∏‡πà‡∏°‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤: root ‡∏´‡∏£‡∏∑‡∏≠ stem (‡∏™‡∏•‡∏±‡∏ö‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏π‡∏õ‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
  const rule = RULES[Math.floor(Math.random()*RULES.length)];
  state.target = rule.key;
  el('rule').textContent = `‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà ${state.round}: ${rule.text} (‡∏°‡∏µ‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2‚Äì3 ‡∏ä‡∏ô‡∏¥‡∏î)`;

  // ‡∏™‡∏∏‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å 2 ‡∏´‡∏£‡∏∑‡∏≠ 3
  const k = Math.random()<0.5?2:3;
  state.max += k;
  document.getElementById('max').textContent = state.max;

  const correctPool = shuffle(PLANTS.filter(p=>p.type===state.target)).slice(0,k);
  const wrongPool = shuffle(PLANTS.filter(p=>p.type!==state.target)).slice(0, 5-k);
  state.board = shuffle([...correctPool, ...wrongPool]);

  // ‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô
  const board = el('board');
  board.innerHTML = "";
  state.selected = new Set();
  state.checked = false;
  state.board.forEach((p,idx)=>{
    const div = document.createElement('div');
    div.className = 'plant';
    div.textContent = p.name;
    div.dataset.idx = idx;
    div.onclick = ()=>{
      if(state.checked) return;
      const i = parseInt(div.dataset.idx);
      if(state.selected.has(i)){ state.selected.delete(i); div.classList.remove('sel'); }
      else { state.selected.add(i); div.classList.add('sel'); }
    };
    board.appendChild(div);
  });

  // ‡∏õ‡∏∏‡πà‡∏°
  el('btnCheck').classList.remove('hidden');
  el('btnNext').classList.add('hidden');
  el('round').textContent = state.round;

  // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
  clearInterval(state.timer);
  let t = state.secs;
  el('left').textContent = t;
  state.timer = setInterval(()=>{
    t--; el('left').textContent = t;
    if(t<=0){
      clearInterval(state.timer);
      if(!state.checked) checkAnswers(); // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ = ‡∏ï‡∏£‡∏ß‡∏à‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    }
  },1000);
}

function checkAnswers(){
  if(state.checked) return;
  state.checked = true;
  const board = el('board').children;
  // ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ñ‡∏π‡∏Å +1, ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏¥‡∏î -1, ‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å = 0
  state.board.forEach((p,idx)=>{
    const div = board[idx];
    const picked = state.selected.has(idx);
    if(p.type === state.target){
      div.classList.add('ok');
      if(picked) state.score += 1;
    }else{
      if(picked){ div.classList.add('no'); state.score -= 1; }
    }
  });
  el('pts').textContent = state.score;
  if(state.max>0){ document.getElementById('pct').textContent = Math.round(100*state.score/state.max); }
  el('btnCheck').classList.add('hidden');
  el('btnNext').classList.remove('hidden');
}

function nextRound(){
  if(state.round >= 10){
    // ‡∏à‡∏ö‡πÄ‡∏Å‡∏°
    clearInterval(state.timer);
    game.classList.add('hidden');
    result.classList.remove('hidden');
    phase.textContent = '‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•';
    el('sumName').textContent = state.name;
    el('sumScore').textContent = state.score;
    document.getElementById('sumMax').textContent = state.max;
    document.getElementById('sumPct').textContent = state.max>0 ? Math.round(100*state.score/state.max) : 0;
    return;
  }
  state.round += 1;
  newRound();
}

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
el('btnStart').onclick = ()=>{
  state.name = (el('player').value || '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô');
  state.round = 1; state.score = 0; state.max = 0; state.secs = 20;
  el('who').textContent = state.name; el('pts').textContent = '0';
  document.getElementById('max').textContent = '0';
  document.getElementById('pct').textContent = '0';
  start.classList.add('hidden'); game.classList.remove('hidden'); result.classList.add('hidden');
  phase.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô';
  newRound();
};

el('btnCheck').onclick = checkAnswers;
el('btnNext').onclick = nextRound;

// ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
function backHome(e){
  if(e) e.preventDefault();
  clearInterval(state.timer);
  start.classList.remove('hidden');
  game.classList.add('hidden');
  result.classList.add('hidden');
  phase.textContent = '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô';
  return false;
}
window.backHome = backHome;
</script>
</body>
</html>
